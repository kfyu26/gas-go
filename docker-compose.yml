# 定义 Docker Compose 管理的服务集合
services:
  # 服务名称：gasdash（可自定义，用于容器间通信标识）
  gas-go:
    # 指定容器运行的镜像：kfyuto/gas-go，版本号 0.0.4
    image: kfyuto/gas-go:0.0.4
    # 设置容器的自定义名称：gasdash（避免 Docker 自动生成随机名称）
    container_name: gas-go 
    # 端口映射：主机 8080 端口 映射到 容器 8080 端口
    # 外部可通过 http://主机IP:8080 访问服务
    ports:
      - "25123:8080" 
    # 配置容器内的环境变量
    environment:
      # 服务监听地址：容器内监听 8080 端口（冒号前为空表示监听所有网卡）
      GAS_SERVER_ADDR: ":8080" 
      # SQLite 数据库文件在容器内的存储路径
      GAS_DB_PATH: "/app/data/gas_usage.db" 
      # 设置容器的时区为 亚洲/上海（避免日志、时间相关功能出现时区偏差）
      TZ: "Asia/Shanghai" 
    # 数据卷挂载：实现数据持久化
    volumes:
      - ./data:/app/data 
    # 容器重启策略：除非手动停止容器，否则异常退出时自动重启
    # 适用于服务意外崩溃、宿主机重启等场景，保障服务可用性
    restart: unless-stopped 